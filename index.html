<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>KAKDWIP SHUTTLE SHOWDOWN 2026</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#111;color:#fff;min-height:100vh;padding:20px}

h1{
  color:#ffcc00;
  text-align:center;
  margin-bottom:15px;
}

.inputs{
  max-width:900px;
  margin:auto;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:8px;
}

input{
  padding:8px;
  border-radius:6px;
  border:none;
}

button{
  display:block;
  margin:20px auto;
  padding:12px 22px;
  border:none;
  border-radius:20px;
  background:#ffcc00;
  font-weight:bold;
  cursor:pointer;
}

.groups{
  display:flex;
  justify-content:center;
  gap:20px;
  flex-wrap:wrap;
}

.group{
  width:260px;
  background:rgba(255,255,255,.12);
  padding:12px;
  border-radius:12px;
}

.group h2{
  color:#ffcc00;
  text-align:center;
  margin-bottom:10px;
}

ul{list-style:none}
li{
  padding:6px;
  border-bottom:1px solid rgba(255,255,255,.3);
}
</style>
</head>

<body>

<h1>üè∏ KAKDWIP SHUTTLE SHOWDOWN 2026</h1>

<div class="inputs" id="inputs"></div>

<button onclick="drawGroups()">Draw Groups</button>

<div class="groups">
  <div class="group"><h2>Group A</h2><ul id="A"></ul></div>
  <div class="group"><h2>Group B</h2><ul id="B"></ul></div>
  <div class="group"><h2>Group C</h2><ul id="C"></ul></div>
</div>

<script>
const MAX = 8;
let groups = { A:[], B:[], C:[] };

// create 24 inputs
for(let i=1;i<=24;i++){
  const inp=document.createElement("input");
  inp.placeholder="Team "+i;
  inputs.appendChild(inp);
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

function drawGroups(){
  const teams=[...document.querySelectorAll("input")]
    .map(i=>i.value.trim())
    .filter(Boolean);

  if(teams.length!==24){
    alert("Please enter exactly 24 teams");
    return;
  }

  // reset
  groups={A:[],B:[],C:[]};

  // prefix map (first 2 alphabets)
  const prefixMap={};
  teams.forEach(t=>{
    const prefix=t.substring(0,2).toUpperCase();
    if(!prefixMap[prefix]) prefixMap[prefix]=[];
    prefixMap[prefix].push(t);
  });

  let remaining=[];

  Object.values(prefixMap).forEach(list=>{
    shuffle(list);

    // ===== RULES =====
    if(list.length===2){
      const g=pickRandomGroups(2);
      groups[g[0]].push(list[0]);
      groups[g[1]].push(list[1]);
    }

    else if(list.length===3){
      ["A","B","C"].forEach((g,i)=>groups[g].push(list[i]));
    }

    else if(list.length===4){
      const twoGroups=pickRandomGroups(2);
      const thirdGroup=["A","B","C"].find(g=>!twoGroups.includes(g));

      groups[twoGroups[0]].push(list[0]);
      groups[twoGroups[1]].push(list[1]);
      groups[thirdGroup].push(list[2],list[3]);
    }

    else{
      remaining.push(...list);
    }
  });

  // fill remaining slots safely (8‚Äì8‚Äì8)
  shuffle(remaining);
  remaining.forEach(team=>{
    const available=["A","B","C"].filter(g=>groups[g].length<MAX);
    groups[available[Math.floor(Math.random()*available.length)]].push(team);
  });

  renderGroups();
}

function pickRandomGroups(n){
  const g=["A","B","C"];
  shuffle(g);
  return g.slice(0,n);
}

function renderGroups(){
  ["A","B","C"].forEach(g=>{
    const ul=document.getElementById(g);
    ul.innerHTML="";
    groups[g].forEach(t=>{
      ul.innerHTML+=`<li>${t}</li>`;
    });
  });

  console.log(
    "Group A:",groups.A.length,
    "Group B:",groups.B.length,
    "Group C:",groups.C.length
  );
}
</script>

</body>
</html>
